package server.endpoints.UserControllerTests;

import static org.junit.Assert.assertEquals;
import static org.junit.Assert.fail;
import static org.springframework.test.web.servlet.request.MockMvcRequestBuilders.get;
import static org.springframework.test.web.servlet.request.MockMvcRequestBuilders.put;
import static org.springframework.test.web.servlet.result.MockMvcResultHandlers.print;

import javax.servlet.ServletContext;

import org.junit.Assert;
import org.junit.Before;
import org.junit.Test;
import org.junit.runner.RunWith;
import org.springframework.boot.test.context.SpringBootTest;
import org.springframework.http.MediaType;
import org.springframework.mock.web.MockHttpServletResponse;
import org.springframework.mock.web.MockServletContext;
import org.springframework.test.context.ContextConfiguration;
import org.springframework.test.context.junit4.SpringJUnit4ClassRunner;
import org.springframework.test.context.web.WebAppConfiguration;
import org.springframework.test.web.servlet.MvcResult;

import server.endpoints.AuthorizedTests;
import server.endpoints.inputmodels.RegisterInputModel;

@RunWith(SpringJUnit4ClassRunner.class)
@SpringBootTest
@ContextConfiguration
@WebAppConfiguration
public class UserTests extends AuthorizedTests {
	
	@Before
	public void setup() throws Exception {
		setupMockMvc();
		login("a@a.a", "a");
	}
	
	@Test
	public void verifyWacLoaded() {
		ServletContext serContext = wac.getServletContext();
		Assert.assertNotNull(serContext);
		Assert.assertTrue(serContext instanceof MockServletContext);
	}
	
	@Test
	public void updateSelfInfo() {
		try {
			RegisterInputModel input = new RegisterInputModel();
			input.setEmail("alt@alt.alt");
			input.setPassword("alt");
			input.setName("Agamemnonas");
			input.setSurname("Iosif");
			input.setTelNumber("6989669969");
			input.setPicture("/9j/4AAQSkZJRgABAQAAAQABAAD/4gxYSUNDX1BST0ZJTEUAAQEAAAxITGlubwIQAABtbnRyUkdCIFhZWiAHzgACAAkABgAxAABhY3NwTVNGVAAAAABJRUMgc1JHQgAAAAAAAAAAAAAAAQAA9tYAAQAAAADTLUhQICAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABFjcHJ0AAABUAAAADNkZXNjAAABhAAAAGx3dHB0AAAB8AAAABRia3B0AAACBAAAABRyWFlaAAACGAAAABRnWFlaAAACLAAAABRiWFlaAAACQAAAABRkbW5kAAACVAAAAHBkbWRkAAACxAAAAIh2dWVkAAADTAAAAIZ2aWV3AAAD1AAAACRsdW1pAAAD+AAAABRtZWFzAAAEDAAAACR0ZWNoAAAEMAAAAAxyVFJDAAAEPAAACAxnVFJDAAAEPAAACAxiVFJDAAAEPAAACAx0ZXh0AAAAAENvcHlyaWdodCAoYykgMTk5OCBIZXdsZXR0LVBhY2thcmQgQ29tcGFueQAAZGVzYwAAAAAAAAASc1JHQiBJRUM2MTk2Ni0yLjEAAAAAAAAAAAAAABJzUkdCIElFQzYxOTY2LTIuMQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAWFlaIAAAAAAAAPNRAAEAAAABFsxYWVogAAAAAAAAAAAAAAAAAAAAAFhZWiAAAAAAAABvogAAOPUAAAOQWFlaIAAAAAAAAGKZAAC3hQAAGNpYWVogAAAAAAAAJKAAAA+EAAC2z2Rlc2MAAAAAAAAAFklFQyBodHRwOi8vd3d3LmllYy5jaAAAAAAAAAAAAAAAFklFQyBodHRwOi8vd3d3LmllYy5jaAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABkZXNjAAAAAAAAAC5JRUMgNjE5NjYtMi4xIERlZmF1bHQgUkdCIGNvbG91ciBzcGFjZSAtIHNSR0IAAAAAAAAAAAAAAC5JRUMgNjE5NjYtMi4xIERlZmF1bHQgUkdCIGNvbG91ciBzcGFjZSAtIHNSR0IAAAAAAAAAAAAAAAAAAAAAAAAAAAAAZGVzYwAAAAAAAAAsUmVmZXJlbmNlIFZpZXdpbmcgQ29uZGl0aW9uIGluIElFQzYxOTY2LTIuMQAAAAAAAAAAAAAALFJlZmVyZW5jZSBWaWV3aW5nIENvbmRpdGlvbiBpbiBJRUM2MTk2Ni0yLjEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHZpZXcAAAAAABOk/gAUXy4AEM8UAAPtzAAEEwsAA1yeAAAAAVhZWiAAAAAAAEwJVgBQAAAAVx/nbWVhcwAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAo8AAAACc2lnIAAAAABDUlQgY3VydgAAAAAAAAQAAAAABQAKAA8AFAAZAB4AIwAoAC0AMgA3ADsAQABFAEoATwBUAFkAXgBjAGgAbQByAHcAfACBAIYAiwCQAJUAmgCfAKQAqQCuALIAtwC8AMEAxgDLANAA1QDbAOAA5QDrAPAA9gD7AQEBBwENARMBGQEfASUBKwEyATgBPgFFAUwBUgFZAWABZwFuAXUBfAGDAYsBkgGaAaEBqQGxAbkBwQHJAdEB2QHhAekB8gH6AgMCDAIUAh0CJgIvAjgCQQJLAlQCXQJnAnECegKEAo4CmAKiAqwCtgLBAssC1QLgAusC9QMAAwsDFgMhAy0DOANDA08DWgNmA3IDfgOKA5YDogOuA7oDxwPTA+AD7AP5BAYEEwQgBC0EOwRIBFUEYwRxBH4EjASaBKgEtgTEBNME4QTwBP4FDQUcBSsFOgVJBVgFZwV3BYYFlgWmBbUFxQXVBeUF9gYGBhYGJwY3BkgGWQZqBnsGjAadBq8GwAbRBuMG9QcHBxkHKwc9B08HYQd0B4YHmQesB78H0gflB/gICwgfCDIIRghaCG4IggiWCKoIvgjSCOcI+wkQCSUJOglPCWQJeQmPCaQJugnPCeUJ+woRCicKPQpUCmoKgQqYCq4KxQrcCvMLCwsiCzkLUQtpC4ALmAuwC8gL4Qv5DBIMKgxDDFwMdQyODKcMwAzZDPMNDQ0mDUANWg10DY4NqQ3DDd4N+A4TDi4OSQ5kDn8Omw62DtIO7g8JDyUPQQ9eD3oPlg+zD88P7BAJECYQQxBhEH4QmxC5ENcQ9RETETERTxFtEYwRqhHJEegSBxImEkUSZBKEEqMSwxLjEwMTIxNDE2MTgxOkE8UT5RQGFCcUSRRqFIsUrRTOFPAVEhU0FVYVeBWbFb0V4BYDFiYWSRZsFo8WshbWFvoXHRdBF2UXiReuF9IX9xgbGEAYZRiKGK8Y1Rj6GSAZRRlrGZEZtxndGgQaKhpRGncanhrFGuwbFBs7G2MbihuyG9ocAhwqHFIcexyjHMwc9R0eHUcdcB2ZHcMd7B4WHkAeah6UHr4e6R8THz4faR+UH78f6iAVIEEgbCCYIMQg8CEcIUghdSGhIc4h+yInIlUigiKvIt0jCiM4I2YjlCPCI/AkHyRNJHwkqyTaJQklOCVoJZclxyX3JicmVyaHJrcm6CcYJ0kneierJ9woDSg/KHEooijUKQYpOClrKZ0p0CoCKjUqaCqbKs8rAis2K2krnSvRLAUsOSxuLKIs1y0MLUEtdi2rLeEuFi5MLoIuty7uLyQvWi+RL8cv/jA1MGwwpDDbMRIxSjGCMbox8jIqMmMymzLUMw0zRjN/M7gz8TQrNGU0njTYNRM1TTWHNcI1/TY3NnI2rjbpNyQ3YDecN9c4FDhQOIw4yDkFOUI5fzm8Ofk6Njp0OrI67zstO2s7qjvoPCc8ZTykPOM9Ij1hPaE94D4gPmA+oD7gPyE/YT+iP+JAI0BkQKZA50EpQWpBrEHuQjBCckK1QvdDOkN9Q8BEA0RHRIpEzkUSRVVFmkXeRiJGZ0arRvBHNUd7R8BIBUhLSJFI10kdSWNJqUnwSjdKfUrESwxLU0uaS+JMKkxyTLpNAk1KTZNN3E4lTm5Ot08AT0lPk0/dUCdQcVC7UQZRUFGbUeZSMVJ8UsdTE1NfU6pT9lRCVI9U21UoVXVVwlYPVlxWqVb3V0RXklfgWC9YfVjLWRpZaVm4WgdaVlqmWvVbRVuVW+VcNVyGXNZdJ114XcleGl5sXr1fD19hX7NgBWBXYKpg/GFPYaJh9WJJYpxi8GNDY5dj62RAZJRk6WU9ZZJl52Y9ZpJm6Gc9Z5Nn6Wg/aJZo7GlDaZpp8WpIap9q92tPa6dr/2xXbK9tCG1gbbluEm5rbsRvHm94b9FwK3CGcOBxOnGVcfByS3KmcwFzXXO4dBR0cHTMdSh1hXXhdj52m3b4d1Z3s3gReG54zHkqeYl553pGeqV7BHtje8J8IXyBfOF9QX2hfgF+Yn7CfyN/hH/lgEeAqIEKgWuBzYIwgpKC9INXg7qEHYSAhOOFR4Wrhg6GcobXhzuHn4gEiGmIzokziZmJ/opkisqLMIuWi/yMY4zKjTGNmI3/jmaOzo82j56QBpBukNaRP5GokhGSepLjk02TtpQglIqU9JVflcmWNJaflwqXdZfgmEyYuJkkmZCZ/JpomtWbQpuvnByciZz3nWSd0p5Anq6fHZ+Ln/qgaaDYoUehtqImopajBqN2o+akVqTHpTilqaYapoum/adup+CoUqjEqTepqaocqo+rAqt1q+msXKzQrUStuK4trqGvFq+LsACwdbDqsWCx1rJLssKzOLOutCW0nLUTtYq2AbZ5tvC3aLfguFm40blKucK6O7q1uy67p7whvJu9Fb2Pvgq+hL7/v3q/9cBwwOzBZ8Hjwl/C28NYw9TEUcTOxUvFyMZGxsPHQce/yD3IvMk6ybnKOMq3yzbLtsw1zLXNNc21zjbOts83z7jQOdC60TzRvtI/0sHTRNPG1EnUy9VO1dHWVdbY11zX4Nhk2OjZbNnx2nba+9uA3AXcit0Q3ZbeHN6i3ynfr+A24L3hROHM4lPi2+Nj4+vkc+T85YTmDeaW5x/nqegy6LzpRunQ6lvq5etw6/vshu0R7ZzuKO6070DvzPBY8OXxcvH/8ozzGfOn9DT0wvVQ9d72bfb794r4Gfio+Tj5x/pX+uf7d/wH/Jj9Kf26/kv+3P9t////2wBDAAYEBQYFBAYGBQYHBwYIChAKCgkJChQODwwQFxQYGBcUFhYaHSUfGhsjHBYWICwgIyYnKSopGR8tMC0oMCUoKSj/2wBDAQcHBwoIChMKChMoGhYaKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCj/wgARCAFRAVEDASIAAhEBAxEB/8QAHAABAAIDAQEBAAAAAAAAAAAAAAYHAQQFAwII/8QAGgEBAAMBAQEAAAAAAAAAAAAAAAMEBQEGAv/aAAwDAQACEAMQAAABtQAAAAAAADCFk01qv3iX44uSRdOv+QWxmt7CPYAAAAAAAAAAAAAAADy9KpMyXs9gxkAGMjj1tcOseHQp24TIAAAAAAAAAAAAABgielHLcMgYzBzt7P5s9T9RY4+gdLa/MswJ52uhBSygAAAAAAAAAAAAAPP0+CrrUqy0wBXFj6R+ZM2LsEl6fd9D8wS27vsxVtqVWWqAAAAAAAAAAAAAB8/Qqm1qntgAHNOjmB7ZMUM5hYsL4UkJXVtiQUssAAAAAAAAAAAAAAFdSvq1IXA1tgz8fY1NPrjk72wMZxHCMTeAWkZAAAAAAAAAAAAAAA5/QFP2N1a+LFzS3RLYVT5Ftcaveuc7cn24fH2AAAAAAAAAAAAAAAAAGPP1HIi87rYszOMgAAAAAAAAAAAAAAAAHzXU7pQl/wA2TkrTzs/WPz5n16FXd5Mt48k+6uz8WanzK0+LNpguhz+gAAAAAAAAAAAAAMZ4BDdDvbRLtqPSEYyK/rz9A0JFoaNxU7ffO9ATZ2KotirzRtrlwUtJjIAAAAAAAAAAABipZNtkn4/bwQGf1Ra4Biib2oqO5z7zpK1Y7krYzYx8VhZ1YlnxOW4IBYFe9klIAAAAAAAAAAHn6V4cq1+F3gCqLXredG8DFAX1+e4r/SlMX6FfWucXfNaUJkWgTA8jgxvjW8fQAAAAAAAAAAEDngraxuBAi33l6kY1pXWJaYNX8/8A6A/P8On1Pn659Xd/QufH20PHQjuw2x3fStpfDCY90AAAAAAAAAAAAMcnr4KktniwgtOq5LEi3QalAfoH8/w6HS1Nv5oeutKT1hZ2p4Kps86b95BbP3IaWIAAAAAAAAAAAAABVFrwE6lTTWAn6Lzp7h8wCwOWUl59vjQalwSOm92fLY6dilU2Pv5AAAAAAAAAAAAAAGMjlQmy+MRrkSnuFUSXFhkV724crOx67sF33yAAAAAAAAAAAAAAAAADW2cFb2TV9oAFbWDX9gnuAAAAAAAAAAAAAAAAABjIq20qttIArSyays8AAAAAAAAAAAAAAAAAAYyKttKrbSBgq+0avtAAAAAAAAAAAAAAAAAAAAqu1KrtQefp5laWfWFnGQAAAAAAAAAAAAAAAAAY+eJBha8Ql48fbBQ/ctwam5jIAAAAAAABWnGAAAAAAAAAAAAAAAAAAAAAD//EAC8QAAEEAQIEBAUFAQEAAAAAAAQBAgMFBgAQERITQBQgIVAVJDM0NRYiIzAyMTb/2gAIAQEAAQUC7OWeKFFtgE18XA1DYCTezWl+OIqNu7TUOLIukxkDX6Zr9TYsK7S11xXaCyTg+ORsjPYHvaxllbzWMlRRwBN81hXDnM+dx2cMqIuDv7wmWzsK2vhAg/onhZPFHzUF0n/O9yKx8AHjFd4YfyS2wMTxbAUpdp7EQd45MJLMuH6tbQk+Kq+94fGMlTyZYY8YDUUjon1BXja/Iini1bl4uxUlYLQ2NJg8KkXw3eP/AM4YnGfyZqxVE2xJrm096G86umifE/GgZpbBfVuHrymd4/8Axhn1vIWPGXARi5CSA4vJ1mMRjNOY12uG2Kflu8XWI/ssP6rO78OWn/MV/L96P8hlvkPMjBHTJwuKZHXLp+SV6JJlEXFSLm0WmpmV6nkIKHhsK9PvctEcsdSa04HdzUcijQuRa0JdNrg2qyGNm+XFcyVo3hAe9lYkjE58etYZo5o/6La1gAjx8OYwzvzRIjIFaXjpVdYjns8plmIIhV+QY+rx7i9rUa32B7GyNOx5Wy+OuQJkymVNfqqTX6jNn14W8sdCYvAxRxoRm+y8jdWMLXgYbJzVvtL05m4ijoifZJshdO/hkMyeFyDXwi3fp9RZsb4w1XNlO4yTHNSuqpDxv05Pr4LaRaSDIIdDWtlHa96VOwaBh0Xx/ciPqwQtcPLthrndTe6K8LkwJURg/eZGQ443Jq+IEYWTqjb5NWOISOdrknJTlx4NBK/eWNhOXjPfj9oxyOb3Vyc0APFgVbHl7eaox9/PT+SwjatyWxrYgfst6z+bLbMGM8ahNfXld1Lxu79EREuYevV4dNz13kO/OG/Srnc9fvjH5jV/VpYQY7aukXuMnsFEDx+u8AFpfXWP/K5B5DvzhKcYcZl6tPsvomH/ALiNskrXOWitEsR+2c5GoCi3N9uf8llnkV/VsV9Uw2XgmxruQTC2cANruxbXCYoDLH2+VGuaynCQALfM4f4AZuuHtKvCML12xt3Tvdsgk6dPijOSm1I9I2QNdf3KJwTtsgqZSpaq+VJGqjk2ySHrU+KzdWo2J+3A/wAaAd07zbL38tTTR9Kq1lJznLTgoAH3FrVD2DQjSaMmN7ZGakaj2Yg5YitivtgP8aIcsU0T0kj1mL+ZWJystzWgBYwA6WTurIGM8avLnpDWqjm6H+WzDYr7YD/Gim8Yccn69RrLZelawtsbxbalLGjpSGE13d21dHYj0Vg8Eh+Q17Humjmy3adqvhha4ebTk4twuV3LrLVWW2xSTnpz1Z4LC/sO8y6Nsh0VEAyAqFK28T1TbJapSGwTc6TvVy0QHw8LTGITl6VVrXyrVWx7ghYwx+8ymvlKjByZjILWdxpQa8wmuOpjhYVvfhki1JsYUs9/YyP8LkM2qSpMHsvYJa8SWTMY2xgfHxBA5LyynaFDY3iQ4sKiRUNfHqIaGLWZpytjXmj9itQGWI1fRCBqd6A4X+P3zf7Qf6HshLecfCnfL75v9oP9D2XFP22O+bfZwfR9lof4sj3zBeaRqcG+y1v7cu3yn8p7MH6ZlvZfNZX7MJ/7PcH+bL/ZgvXMtnrwZhzepL7NW+uX7SfTwr2VV1zJwpV5sp2l+nVHF1yutLuVRHSOG9itwVsBv0wRqopI66btrj8j7V//xAAjEQAABgEDBQEAAAAAAAAAAAAAAQIDBAVAERITISI0QXAx/9oACAEDAQE/AfnUKsbkN7zMWMFMUy0P9xa+Q625tb9iyU7yaO4tf5CRdpMn9cWsTukpF632pXi1HkkLlG6Pi1ayRIIzEpHI0aQeIXQKtXFMcXv5L//EACIRAAEDAwQDAQAAAAAAAAAAAAEAAgMEEUAhIjJwEhMxQf/aAAgBAgEBPwHrqSYsNlDJ5/cWVgI1UNraYsvBUx24s3BUp/MWfgqc7sWYXYmGzsb0AOv1L//EAEIQAAECAwIICwYFAwUBAAAAAAECAwAEERIhEBMgIjFBUXEFIzJAQlBSYXKBsRQzgpGhwTRiktHwMHPhJDVDU6Ky/9oACAEBAAY/AuZ8a6hHiMfi2vnH4tv5xxcw2r4upi2zxz2waBFq1iGj8MVmplSj+URfjT8UaHf1RxTriPrFqUfxyBqB+xjFcItFpfagLbUFJOgjqEqWQlI0kwZPgtKiDcV7f8QlbgDj+06t2XZfQK6lDSIH/LJqP83GEusKqk/TqBPB0pyAc/fFhoX9JWs/0VNupCkK0iLBKvZHfT/HP8z3zlye7vj2h33zu3UMkpXMotCKS7yVnZhsvTDaVbKxaYcStO0RjaZzSq+UMLPKpZPlz4g+5Z9BkhDdxeNmuwYAts2VpvBhp48o6d8OLauUc2uyDU1MIbrmO5pEPNq6SCImGj0VV56YnTruyZdQ0JXfhFoaVEiFtNUt1tCsFLqFJUNRhp6wQ02bRURBETrf8089O6J3yyVMvCqFQfZ3G1I/NpgGccTixqTrgJSAEi6gwZyQd4wz/n68+nmzp/z/AE0S0q3jnq53dArpif8AP/658tJuQ9o88kvPVsi66L0vDyj3i/0xcpatyYozLOrMUYb9lZ7WiC4tWMfV0tkOvK6CYmJpXTNBz5uda5bWndDbvS0KGw5FFAERey2fhi+VZ/TFUyzP6YzG0J3DC1ItXuLNTDLPZF+/nykLFUqFCIobSpNyEraUFIOgj+iaqCntSIPCU38FdZ6gLT6bST9IJSC7Jq/nzirC87Wk6Rlcc8mvZF5jE8FsqqelrjH8JnGOG+xX1gBIoB1CUrAUk6jGP4LcxLg6NY48OrFdChUGM6Tv3x+E/wDUUlpQV3FUcc4WUd5sxamnVOnYLhFlhtKB3dTckfKJhIABKDo3QtPZX1URtieYUCKHqXE8Gy6lu/mjS018o/FI/nlFV8I0O8wVK4SokXnOMGxMvKG21Bo66Ce+M556nigPN8JObCL7vrH+4ufI/vHE8I13kxmvId3kQzKTyG6qOoc+W86aIQKmGpuXSUIUoVSflkON9pJELYduWDhm0dC45GPs2sXS7yhLrJqk/TnrXBsseln0iUVLppQ0J2w052kg5HtUuONQM4bRGcaKiiPnCNa3M9RyFNuJCkUoR8MKZeqZR3QfvAUk1Bv52pzpm5A74VOv++d0V2RXsrESvhpkzSaXBRuEZopEv4B6ZE4vUiv7QWnfhVsMK4NnjS/MJ53Y0yrEADREy2NNi6FNa215M54jgl1D/rHpkcI/zXgtIumEck7e6PY5yomEXCuvnOLaPHPXDuEC175y9f7YZuW1Gv0yZzxGDDP5apw1iec2kffCJ6TufbvVTX3xfc8jlDm5KjQC8wqZUP8ATs6K/TIZePIdp+2TNObVmCImWDqNoYX1bEEw8vtOYbelxVyBDs4+KF3kjm6JJj3r2ndCGunpWe/IYmE8pCrMMu9tAOFR7ocO04CnUtJGGZP5aQ3+Yk4FKUaJAqYU4uvsrWjdsi7m6ZqUVR9A0bY9m4U4twXWz94BF4OF8DSkWobGtBKcLvhMKwSqtqsNO0sCJVOuwMCJCW945y6ekJaHK0rPfznPFl3UsR7LPAmX1H9oStBqk3g4FIVoUKROSx1X/bC74TBwMvDSg1hK06FCuCTl+0qsJTsFIW8eVoSNpg8IzWctRzK+vOy06NyuzHsc7fLnQdnfAKbwcDiU6HK/UVwu+AwcBhg605nywSiiKhAtU84U7jzLy1aACC5jS+ykVJJ0QytsWaCzTZzwoXcsclWyFcHz5shPJUdUFOMUe8Juhh1pYU2qlCN2FxI0lJELYdFlYOAxMtdAEEYAhN9huEDskiH8YQE2DD39z7c9k2wkBxd1rzgNllKjS9R0wEIOa24CN2R7VLDjk8odoRQ8qA03etV0BCveKzl4HkucmhH0hY4OcBaV3wEz71lod8JZZFEj689bflwS41qGyLM8heOT2RphybDZS2o0EMk60D0w8bMNpOy1CnpN+j2tKRcYU6pgvPdG/RCUttpZt3Jui0p4o7rdIM1OKSTTbUnqG25LtKVtpEultISkL0DdDCAS64EC5G6CqVk7KBfUisKWubstpNI4111Z+Ue4teI1ji2m07kxJu6wowk7RXqPFLUU31qItUxq9q4f/tn0h3+59siW8f2hvwjqVxO1JETLesLyJfx/aG/COpuEEDk1++RL+P7Q34R1NPN7bXrkSLPaV+0AbOppsbbWRwdv+/U7/n6ZEs1qbp+/U724+mRMK1JB6nmPP0wqOwROTCuWTTqea+LCrdE5vHU1a3RNqF/Kwqpsh5LUsVKXtSboFiWKdzWmG1Piy6RnDqPFJdLV9aiKe2CxuMF0OqcWRS8c3d8vTqv/xAAqEAEAAQIDBgcBAQEAAAAAAAABEQAhMUFREGFxgZGhIEBQscHR8OHxMP/aAAgBAQABPyHyc8I3JSMOw6sD2gKESRk9EmocMKW5vaOksMTGPdreZxB3aMYjX/GwJDN74NX0aiUROByBjmOFF4eVSND6AS0ZRAVa6m8Rnw3qgDm5We581Hhika0IsuE04s8poj6TDPcfPzTlYBZIxncUWv5dxf8AifYIQqDU1MJZ8aKQjM+etDML7qPFyc6v64+BYxo82wgzHSkQbks9HZNb6Rr6cHTCsxRmLBLes/FIrkczZ51rMl8MpPloQQeCZqUFwLtL1pDqIGVOHAYjotTZywbzOmQyYq3alku7xlV8oQ6UxSwnmfzzshTRoFdKeb4S6vBaSU40FTKBLNP00wwg1EZVi9GCsG7gB3FHfglaREPRHne9U7Gcru+GMyL7t9X2XacDjaszzN93N1FPWGAFRV2T4lACAAPPtEya0sEfRf8AKaGZYAMJZcaasIhc8/SFxxO6d/DcvxZllp8N8xfmjMDi6kS2i0viSQ+6lDTFfJv0rOO5nNH3VjQROOXeo659rF3u+enJHBm9Z5PvRBS2Fk4+BMgZJNRQrRFOz0Go8Tw12EEqNjhoszsUZOJ8Wbv54eDiMym/4R+yibrOCaPHNC8Qt4zvq+3Ko4CeBRh58JfVLU30ib+X8oNBwLlVPgmmUTWycioYFqRP1KZJyuSObOiSCgAw9BxyoBI0TxAnAnc5cKM0SerBQUFwM+Ks2PV9Vm1WEoZ4uUDoXojmFjXvXDJ/H0WKXuu0jBhowpvF+iDUekgvgIqDGbhaRTwz59YxpbN0CLRwq6QNLH5qbHrlOwjWtsKmCFQ0ZaCvUyxgZk1xRl/3UaDMgkt9CvGchoD7qxlbx7lRJCECYc5GjzsyAP4UoyhlFuw6+C80XniUB1v47II3VAywtb70bWtF7v8A41mlwZrR3+dnuWK1b+Begizs8oIXpQEYddPAJyWP1JVuxYjRFeXGj9YZxGBRsaccGnOkrhTomXJg0PAUEwTzbuTnWhprLPEZnnSwTE0ChmJuTHgS9Q2GVFC4btmxtEDcCdqB4Tjma1KAJHDDkcHzSxUGdRohj1aNkAQBkVEC5PEXo3sZ0b/fgdkhPPR4EfAr0bst+esahuGn3Ck2Opjjk7/MkIkkWOY/FFA4TaabAAjca0XHDik7PilDagWc3k0bHIsqLl4Oqto+YAxx91WJIQWe8o8sTQUjkVNsW3BbB80YbctEk8bvAtcLj1o70KnNcC7Pxtu7Ht1SGXingH3tYQL85uvAqQAsYMiysUeWmCcCY3QHP4o6ArjH4FbddNzc9qAr5FNu4pPakp8aMyr8x8k+KNly4WHmxVw/1/5skjEjkFaPacVuJxqAAAYB5eG+BfFlyHJpPccAg+nGlJASJcdsBJAeT/tTKyp3Znvttb9RXfbNwydbUbBfP8l8UiJAZ4t/mpprpUuX3Uh8XxHmSljDX89SjjU8M13N1GTPAwTZjsR8GmGs7N4y+Nv4+ld/swGyOTNYRgHPYxmZ8fmjMwKkZDjXIoV5J3udTDzQTOFdalB2U7uWTdqUoAKRMHZx6x+GO38XSu/2cK3qYMNX5y2DB93MdPas/wDBo5RjRssVh5JofAFHMWjzkFRJz39VO9KYXd4NW61iS9Vc+oMbeEWjilWj6I67CG4JSF3ctF2EXIJ7r2qZknh95+aJbiq4YU1JwLOjzt5kLWIAq0jTFnWaYAu7jgaUCZ7EmrwI2MfsKCZA5a0Raqw9qssmk36ctgdSFGpb80oEJsDqNTaRcS9Arv4wtXzs49hxHFJwrJsy9zpQlNI3wNafFy2k0gxqOBMwmoQlZV/m1hxDOBv8aMWK42Xi0XB9x7aUaGWmXZHnopE45r2mMFswURoTcreagVaT7OLakUTEuHQreKaQKj0D33ZQ5bdIrSBvZ+K3bnoawMk4wn+1fvxeOBQscD3Vfi3PB3Gn52nov5uCoGYJjl/PB3en5mnorTyElHN4O90/I09FafgMaHKvUVBGAj0a9PxD4LjMfp9H52e14Dm5J5ejvzdO1p5uJbcB6PjGR7W3WlGgv8vVK+j3rT6be9e1Kwy++p9EAxpNsAxZwoGEL5MMTbKESzg1tSJlJLwcKxxvBOqaDSChk+hnUwdRxqZm2f6prJvRgHl/z7vpf//aAAwDAQACAAMAAAAQMMMMMMMMUAkwkEMMMMMMMM88888888AM88II88888888888888ok8ogUoI888888888888884k8sEssQ888888888888884U8sogsc088888888888888gcsc4M8888888888888888sYkg0Ec8888888888888884g44o4w888888888888888kAIirwsQ88888888888888oQ8FXUgA8888888888884Y408YYco8k088888888888Ysg8Re0A4gU888888888840wk8gB10408888888888888co8uvmk088888888888888c4QlTE08888888888888888oQAtAs88888888888888888sc8488888888888888888840sY8888888888888888884cs0888888888888888888o04k888888888888888888M44Y488888888AAAAAAAAAAAAAAAAAAAAAA/8QAIBEBAAIBAwUBAAAAAAAAAAAAAQARQDFBsSFRYXCRcf/aAAgBAwEBPxD10eTe5FS4xRJr7GNu2nzFH1nlExaj+8S4G3TF5fEVE2RhiJbRAW3IKUxEqyXYVovxNcV66+j/AP/EABsRAAIDAQEBAAAAAAAAAAAAAAABETFAIXBB/9oACAECAQE/EPOuYDVcKyyb5EXnlsEOOVoY6vKsIstzEiKLyWLyVP8A/8QAKRABAAIBAwIHAAMBAQEAAAAAAQARITFBYVFxEECBkaGx8CBQwdHh8f/aAAgBAQABPxCuWVyyuWVyyuWVyyuWVyyuWVyyuWVyyuWVyyuWVyyuWev1PV9qn70Q5lZV4D9ER1/LtE+HQfZqGgpuZJjrAvRlcsrllcsrllcsrllcsrll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");
			assertEquals(200, updateUser(input).getStatus());
		} catch (Exception e) {
			e.printStackTrace();
			fail();
		}
	}
	
	@Test
	public void updateSelfInfoFalseEmail() {
		try {
			RegisterInputModel input = new RegisterInputModel();
			input.setEmail("alt");
			assertEquals(400, updateUser(input).getStatus());
		} catch (Exception e) {
			e.printStackTrace();
			fail();
		}
	}
	
	@Test
	public void updateSelfInfoNullEmail() {
		try {
			RegisterInputModel input = new RegisterInputModel();
			input.setEmail(null);
			assertEquals(200, updateUser(input).getStatus());
		} catch (Exception e) {
			e.printStackTrace();
			fail();
		}
	}
	
	@Test
	public void getDetailedInformationForSelf() {
		try {
			assertEquals(200, getDetailedUserView().getStatus());
			assertEquals(200, getDetailedUserView("").getStatus());
			assertEquals(200, getDetailedUserView(null).getStatus());
		} catch (Exception e) {
			e.printStackTrace();
			fail();
		}
	}
	
	@Test
	public void getDetailedInformationForOthers() {
		try {
			assertEquals(200, getDetailedUserView("k@k.k").getStatus());
			assertEquals(404, getDetailedUserView("falseemail").getStatus());
			assertEquals(404, getDetailedUserView("false@false.false").getStatus());
			assertEquals(404, getDetailedUserView("1111").getStatus());
			assertEquals(404, getDetailedUserView("d@root.com").getStatus());
		} catch (Exception e) {
			e.printStackTrace();
			fail();
		}
	}
	
	private MockHttpServletResponse updateUser(RegisterInputModel input) throws Exception {
		MvcResult result;
		if (session == null)
			result = mockMvc.perform(put("/user/update")
					.contentType(MediaType.APPLICATION_JSON)
					.content(objectMapper.writeValueAsString(input)))
					.andDo(print()).andReturn();
		else
			result = mockMvc.perform(put("/user/update")
					.contentType(MediaType.APPLICATION_JSON)
					.content(objectMapper.writeValueAsString(input))
					.session(session)).andDo(print()).andReturn();
		return result.getResponse();
	}
	
	private MockHttpServletResponse getDetailedUserView() throws Exception {
		MvcResult result;
		if (session == null)
			result = mockMvc.perform(get("/user/details")).andDo(print()).andReturn();
		else
			result = mockMvc.perform(get("/user/details").session(session)).andDo(print()).andReturn();
		return result.getResponse();
	}
	
	private MockHttpServletResponse getDetailedUserView(String email) throws Exception {
		MvcResult result;
		if (session == null)
			result = mockMvc.perform(get("/user/details").param("email", email)).andDo(print()).andReturn();
		else
			result = mockMvc.perform(get("/user/details").param("email", email).session(session)).andDo(print()).andReturn();
		return result.getResponse();
	}

}
